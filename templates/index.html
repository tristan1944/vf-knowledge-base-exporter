<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Voiceflow KB - Dashboard</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
      h1 { margin-bottom: 8px; }
      form { margin: 12px 0; padding: 12px; border: 1px solid #ddd; border-radius: 8px; }
      label { display: block; margin: 8px 0 4px; font-weight: 600; }
      input[type=text], textarea { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 6px; }
      .row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
      .actions { margin-top: 12px; }
      button { padding: 8px 14px; border: none; border-radius: 6px; background: #1f74ff; color: white; cursor: pointer; }
      button.secondary { background: #555; }
      .hint { color: #666; font-size: 12px; }
      .nav { margin: 12px 0; }
      .nav a { margin-right: 8px; }
      .flash { padding: 8px 12px; border-radius: 6px; margin: 8px 0; }
      .flash.success { background: #e7f6ec; color: #1d7a36; border: 1px solid #bde3c6; }
      .flash.error { background: #fdecec; color: #8a1f1f; border: 1px solid #f3c3c3; }
    </style>
  </head>
  <body>
    <h1>Voiceflow Knowledge Base</h1>
    <div class="nav">
      <a href="/list">View Documents</a>
    </div>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="flash {{ category }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <h2>Credentials</h2>
    <form method="post" action="/set-creds">
      <div class="row">
        <div>
          <label>API Key</label>
          <input type="text" name="api_key" placeholder="VF.DM..." />
        </div>
        <div>
          <label>Project ID</label>
          <input type="text" name="project_id" placeholder="Project ID" />
        </div>
      </div>
      <div class="actions">
        <button type="submit">Save</button>
      </div>
    </form>

    <h2>Query</h2>
    <form method="post" action="/query">
      <label>Question</label>
      <input type="text" name="question" placeholder="Ask a question..." />
      <div class="actions">
        <button type="submit">Run Query</button>
        <a class="secondary" href="/list">List Documents</a>
      </div>
    </form>

    <h2>Upload File</h2>
    <form method="post" action="/upload/file" enctype="multipart/form-data">
      <label>File</label>
      <input type="file" name="file" />
      <label>Metadata (JSON)</label>
      <textarea name="metadata" rows="3" placeholder='{"category":"docs"}'></textarea>
      <div class="row">
        <div>
          <label>Max Chunk Size</label>
          <input type="text" name="max_chunk_size" placeholder="e.g. 900" />
        </div>
        <div>
          <label>&nbsp;</label>
          <label><input type="checkbox" name="overwrite" /> Overwrite</label>
        </div>
      </div>
      <div class="actions">
        <button type="submit">Upload File</button>
      </div>
    </form>

    <h2>Upload URL</h2>
    <form method="post" action="/upload/url">
      <label>URL</label>
      <input type="text" name="url" placeholder="https://example.com" />
      <label>Name (optional)</label>
      <input type="text" name="name" placeholder="Descriptive name" />
      <label>Metadata (JSON)</label>
      <textarea name="metadata" rows="3" placeholder='{"category":"ref"}'></textarea>
      <div class="row">
        <div>
          <label>Max Chunk Size</label>
          <input type="text" name="max_chunk_size" placeholder="e.g. 900" />
        </div>
        <div>
          <label>&nbsp;</label>
          <label><input type="checkbox" name="overwrite" /> Overwrite</label>
        </div>
      </div>
      <div class="actions">
        <button type="submit">Upload URL</button>
      </div>
    </form>

    <h2>Upload Table</h2>
    <form method="post" action="/upload/table">
      <label>Table Name</label>
      <input type="text" name="name" placeholder="My Table" />
      <label>Schema (JSON)</label>
      <textarea name="schema" rows="6" placeholder='{"id":{"type":"number","searchable":true},"name":{"type":"string","searchable":true}}'></textarea>
      <label>Items (JSON array)</label>
      <textarea name="items" rows="6" placeholder='[{"id":1,"name":"Item A"}]'></textarea>
      <label>Metadata (JSON)</label>
      <textarea name="metadata" rows="3" placeholder='{"type":"dataset"}'></textarea>
      <div class="row">
        <div>
          <label>Max Chunk Size</label>
          <input type="text" name="max_chunk_size" placeholder="e.g. 900" />
        </div>
        <div>
          <label>&nbsp;</label>
          <label><input type="checkbox" name="overwrite" /> Overwrite</label>
        </div>
      </div>
      <div class="actions">
        <button type="submit">Upload Table</button>
      </div>
    </form>
  </body>
  </html>


